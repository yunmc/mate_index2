import{a0 as s,b as h,a1 as u}from"./index.1dbba625.js";const d=t=>s.post("chat/chat/init_chat",t),f=()=>s.post("user/init/im_user"),l=t=>s.post("chat/chat/v3",t),g=t=>s.post("chat/chat/like",t),p=t=>s.post("/chat/chat/pro_unlock_image",t),_=t=>s.post("chat/chat/send_selfie",t),P=t=>s.post("/chat/chat/collection",t),S=t=>s.post("/chat/chat/before_send_msg",t),L=t=>s.post("chat/chat/msg_transform_audio",t),b=()=>s.post("/aiUser/core/greeting_corpus"),k=t=>s.post("index/home",t),c=t=>s.post("aiUser/core/info",t),x=t=>s.post("/index/home/distribution_channel",t),m=h(),A=u({id:"chat",state:()=>({sdkAppId:1771000113,isPopupDl:!1,isPopupPay:!1,isPopupCoin:!1,isPopupAi:!1,isPopupPhoto:!1,aiInfo:{},aiList:"",chatIm:"",init:{},chatList:[],isSend:0,originalData:[],isScroll:!0,isAI:!0,isLoadAi:!1,payToken:"",delAiInfo:"",bannerAssign:!1,mainPosition:0}),actions:{getCoreInfo(t){const i={ai_uid:t};return new Promise((e,a)=>{c(i).then(o=>{this.aiInfo=o.data,e(o)}).catch(o=>{a(o)})})},getInitChat(){const t={ai_uid:this.aiInfo.ai_uid,is_true:!0,greeting:!0};return new Promise((i,e)=>{d(t).then(a=>{a.code,i(a),i(a)}).catch(a=>{e(a)})})},getInitIm(){return new Promise((t,i)=>{f().then(e=>{this.init=e.data,t(e)}).catch(e=>{i(e)})})},setAiInfo(t){this.aiInfo="",setTimeout(()=>{if(t.ai_name)this.aiInfo=t,this.bannerAssign=!0;else{const i={ai_uid:t.ai_uid};c(i).then(e=>{this.aiInfo,this.aiInfo=e.data,this.bannerAssign=!0}).catch(e=>{})}},100)},getChatV3(t){return new Promise((i,e)=>{l(t).then(a=>{i(a)}).catch(a=>{e(a)})})},getChatLike(t,i,e){const a={ai_uid:this.aiInfo.ai_uid,msg_id:t.content.data.extra.messageId,pic_id:t.content.data.extra.data.picId,user_behavior:e};return new Promise((o,n)=>{g(a).then(r=>{this.chatList[i].content.data.extra.data.is_like=e,o(r)}).catch(r=>{n(r)})})},getUnlockImage(t,i){const e={msg_id:t.content.data.extra.messageId,pic_id:t.content.data.extra.data.picId};return new Promise((a,o)=>{p(e).then(n=>{n.code==200?(this.chatList[i].content.data.extra.data.pay_url=n.data.url,m.userInfo.coins_balance=n.data.balance,this.chatList[i].content.data.extra.data.is_unlock=!0,this.chatIm.modifyMessage(i)):n.code==1011,a(n)}).catch(n=>{o(n)})})},getSendSelfie(){const t={ai_uid:this.aiInfo.ai_uid};return new Promise((i,e)=>{_(t).then(a=>{a.code==200||a.code==1011,i(a)}).catch(a=>{e(a)})})}},persist:{enabled:!0,strategies:[{storage:localStorage,paths:["aiInfo","aiList","init"]}]}});export{x as a,b,L as c,P as d,k as g,A as u,S as v};
